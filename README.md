# Small Company ERP Accounting System

This is a lightweight inventory management and accounting system, initially designed for MYF Company. Built on a modern web technology stack, it offers comprehensive inbound and outbound management, inventory tracking, and data export functionalities. Other "re-seller" trading companies can also use it.

> The authror of this project is Chinese, there may be a large number of Chinese comments in the project, I personally use vibe coding extensively to develop and maintain this project, most of the Chinese comments were generated by AI (I prefer to write Chinese prompt). If you need to develop the project twice, please understand that I don't have enough time to translate all the Chinese comments.

-----

### Key Considerations

  * **Design Scope:** This project is specifically designed for small-scale trading companies. Inbound and outbound products are considered the same, and they are not managed separately.
  * **Performance:** This project uses Node.js + SQLite by default, which only supports low-concurrency scenarios and may not provide the best experience. For large-scale concurrency, please adapt it to a different database and configure an Nginx layer.

-----

### ðŸš€ Getting Started

**Environment Requirements**

  * Node.js \>= 20.0.0
  * npm \>= 8.0.0

**One-Click Installation and Launch**

1.  **Install all dependencies:**
    ```bash
    npm run install:all
    ```
2.  **Start the development environment (frontend + backend):**
    ```bash
    npm run dev
    ```
      * Frontend development server: `http://localhost:5173`
      * Backend API server: `http://localhost:3000`
3.  **Production environment:** `http://localhost:3000`

-----

### Technical Architecture

**Frontend Stack**

  * **React 19 + React Router 5 + Ant Design + Vite**
  * Responsive design, supporting desktop and mobile devices.

**Backend Stack**

  * **Node.js** (developed with Node.js v24) **+ Express + SQLite3**
  * Uses the `xlsx` library for high-performance, in-memory Excel exports.

-----

### Directory Structure

```
myf-db-systool/
â”œâ”€â”€ backend/            # Backend services
â”‚   â”œâ”€â”€ server.js       # Server entry point
â”‚   â”œâ”€â”€ db.js           # Database connection
â”‚   â”œâ”€â”€ routes/         # API routes
â”‚   â””â”€â”€ utils/          # Utility functions
â”œâ”€â”€ frontend/           # Frontend application
â”‚   â”œâ”€â”€ index.html      # Application entry point
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.jsx
â”‚       â”œâ”€â”€ main.jsx
|       â”œâ”€â”€ i18n        # i18n files
â”‚       â””â”€â”€ pages/      # Page components
â”œâ”€â”€ package.json        # Project configuration
â”œâ”€â”€ README.md           # Project documentation
â””â”€â”€ vibe-coding-prompt.md # LLM development assistance document
```

-----

### Usage Guide

1.  **Initialize Data**

      * The **System Overview** and **Inventory Details** pages use a cache design. This means they only recalculate and save the results to a JSON file when you manually click the refresh button.
      * The first time you start the system, the homepage might not load correctly. You need to manually click the refresh button.
      * The **System Overview** page depends on data from the **Inventory Details** page. If the System Overview page doesn't display correctly, please refresh the **Inventory Details** page first.

2.  **Basic Data Setup**

      * **Customer/Supplier Management:** Add partner information.
      * **Product Management:** Add product details.
      * **Product Price Management:** Set product prices.

3.  **Business Operations**

      * **Inbound/Outbound:** Record purchases and sales, with support for data filtering and instant Excel export.
      * **Inventory View:** Monitor inventory status. Supports inventory refresh.
      * **Data Export:** Native Node.js Excel export for basic information, inbound/outbound records, and accounts receivable/payable details.

-----

### Page Structure

  * **Overview & Debug:** Database overview and test data.
  * **Inbound Management:** AutoComplete input with strong binding for `Code`-`Abbreviation`. Supports filtering and data export.
  * **Outbound Management:** AutoComplete input with strong binding for `Code`-`Abbreviation`. Supports filtering and data export.
  * **Inventory Details:** Inventory query and statistics. The inventory history feature has been removed, and a refresh function has been added. Also includes a new estimated total cost display (based on `inventory quantity Ã— latest inbound unit price`).
  * **Customer/Supplier Management:** Three-way linkage for `Code`-`Abbreviation`-`Full Name`.
  * **Product Management:** Three-way linkage for `Code`-`Abbreviation`-`Model`.
  * **Product Price Management:** Price history management.
  * **Accounts Receivable Management:** Real-time aggregation of receivables and payment receipt management.
  * **Accounts Payable Management:** Real-time aggregation of payables and payment management.
  * **Data Analysis:** Analyzes sales data by time period, customer, and product to calculate sales revenue, costs, profit, and profit margin. A new detailed analysis function allows viewing sales details for each product for a specific customer or sales details for each customer for a specific product.

-----

### Smart Features

  * **`Code`-`Abbreviation` Strong Binding:** On the inbound/outbound page, you can input either the code or abbreviation, and it will automatically autocomplete with matching items.
  * **Three-Way Linkage Validation:** The `Code`-`Abbreviation`-`Full Name` for customers/suppliers and `Code`-`Abbreviation`-`Model` for products are strongly linked to ensure data consistency.
  * **Automatic Price & Amount Calculation:** Automatically fills in prices based on historical data and updates inventory levels.
  * **Status Visualization:** Payment/receipt status indicators for progress tracking.
  * **Batch Import/Export:** Supports batch data processing in formats like Excel.

-----

### Data Analysis Features

  * **Multi-Dimensional Analysis:** Supports data analysis by time period, customer, product, etc.
  * **Financial Metrics:** Automatically calculates sales revenue, costs, profit, and profit margin.
  * **Detailed Analysis Tables:** Displays sales details for each product when a specific customer is selected, and sales details for each customer when a specific product is selected.
  * **Smart Display Logic:** Only records with sales revenue greater than zero will be shown in the detailed table.
  * **Cache Optimization:** Uses a caching mechanism to improve query performance and automatically clears expired caches older than 30 days.
  * **Flexible Filtering:** Supports analysis for all customers/products or for specific customers/products.
  * **Real-time Refresh:** Supports manual refreshing to recalculate the latest data.

-----

### Configuration Management

  * **Unified Configuration:** `data/appConfig.json` centrally manages all application configuration items.
  * **Payment/Receipt Methods:** Supports various methods like cash, bank transfer, check, banker's acceptance draft, and online payment.
  * **Product Categories:** Pre-set common product categories like electronics, machinery, office supplies, etc.
  * **Export Configuration Module:** `data/exportConfig.json` allows for easy modification of the column order in exported XLSX reports.

-----

### Accounts Receivable/Payable Management

  * **Accounts Receivable:** Real-time aggregation of outstanding customer payments, with support for receipt records and details.
  * **Accounts Payable:** Real-time aggregation of outstanding supplier payments, with support for payment records and details.
  * **Account Details:** Detailed payment/receipt records with support for various payment methods.
  * **Status Tracking:** Visualizes account status and automatically calculates balances and overdue situations.

-----

### Common Development Commands

**Root Directory**

```bash
npm run install:all     # Installs all dependencies
npm run dev             # Starts the development environment
npm run build           # Builds the production version
npm start               # Starts the production environment
```

-----

### Core Database Tables

  * `inbound_records`: Inbound records (includes `supplier_code` and `product_code` fields)
  * `outbound_records`: Outbound records (includes `customer_code` and `product_code` fields)
  * `partners`: Customers/Suppliers (`Code`-`Abbreviation`-`Full Name` strong binding)
  * `products`: Product information (`Code`-`Abbreviation`-`Model` strong binding)
  * `product_prices`: Product prices (managed by date)

-----

### Main API Endpoints

See the `vibe-coding-prompt.md` document or the source code in the `/backend/routes/` directory.

-----

### User Interface

  * **Ant Design Style:** Modern UI design with a responsive layout.
  * **Smart Forms:** `AutoComplete` components enable strong `Code`-`Abbreviation` binding for a smooth user experience.
  * **Data Tables:** Supports pagination, sorting, filtering, and batch operations.
  * **Status Indicators:** Visualizes payment/receipt status and provides operational feedback.
  * **Mobile Adaptation:** Supports access from both desktop and mobile devices.

-----

### Performance & Scalability

**Performance Optimization**

  * **Frontend:** Code splitting, lazy loading, and cache optimization.
  * **Backend:** Paged queries and index optimization.
  * **Export Function:** In-memory operations for a response time of \<50ms, supporting low-concurrency scenarios.

**Extended Features**

  * Native Node.js Excel export.
  * Multi-language support (currently adapted for Chinese, English, and Korean).
  * File upload and Excel import functionality.
  * User permissions management system.
  * Data backup and recovery.